# 使用wsl2配置ubuntu24.04

## 启用wsl2

打开“适用于Linux的Windows子系统”（Windows Subsystem for Linux）和“虚拟机平台”（Virtual Machine Platform）两个功能。

注：可直接使用以下命令实现：

```bash
dism.exe /online /enable-feature /featurename:Microsoft-Windows-Subsystem-Linux /all /norestart
dism.exe /online /enable-feature /featurename:VirtualMachinePlatform /all /norestart
```

## 安装WSL 2 Linux内核

下载并安装适用于x64架构的WSL 2 Linux内核。在PowerShell中运行：

```bash
wsl --update
```

## 设置WSL 2为默认版本

```bash
wsl --set-default-version 2
```

## 安装Ubuntu 24.04 LTS

```bash
wsl --install -d Ubuntu-24.04
```

## 启动Ubuntu 24.04

安装完成后，可以在开始菜单中找到Ubuntu 24.04 LTS，或者通过命令行输入

```bash
wsl -d Ubuntu-24.04
```

首次启动时，系统会引导创建用户名和密码。

## 更换pip3下载源

```bash
sudo su
cd /root/
mkdir .pip
cd .pip
touch pip.conf
nano pip.conf
```

写入以下内容后ctrl + O保存

```bash
[global]

index-url = https://pypi.tuna.tsinghua.edu.cn/simple

[install]

trusted-host=pypi.tuna.tsinghua.edu.cn
```

## 将ubuntu的位置转到非系统盘避免系统盘空间不足

首先在非系统盘上创建一个*.tar文件，用来储存打包后的系统，以下操作将现ubuntu24.04导入*.tar文件中

```bash
wsl --export Ubuntu-24.04 F:\WSL\wsl2tar\ubuntu2404.tar
```

接着，注销当前系统盘的ubuntu系统

```bash
wsl --unregister ubuntu-24.04
```

将打包后的系统导入指定目录

```bash
wsl --import Ubuntu-24.04 F:\WSL\ubuntu2404\ F:\WSL\wsl2tar\ubuntu2404.tar --version 2
```

将用户权限改为普通用户，例如vencent-skywalker是原来的用户名

```bash
ubuntu2404.exe config --default-user vencent-skywalker
```

## 配置apt-fast与多线程下载工具axel

```bash
sudo apt update && sudo apt upgrade -y
sudo apt install axel
sudo add-apt-repository ppa:apt-fast/stable
sudo apt -y install apt-fast
```

现在它将要求最大连接数，推荐8。

打开apt-fast.conf配置文件

```bash
sudo nano /etc/apt-fast.conf
```

将镜像配置这一行改为

```bash
MIRRORS=( 'http://deb.debian.org/debian','http://ftp.debian.org/debian,http://ftp2.de.debian.org/debian,http://ftp.de.d>p.de.debian.org/debian,ftp://ftp.uni-kl.de/debian')
```
